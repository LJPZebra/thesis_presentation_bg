<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content=
    "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>reveal.js</title>
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/custom.css" id="theme">
    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" id=
    "highlight-theme">
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <section data-background-video="assets/100_zebra.mp4"
            data-background-video-loop="loop">
                <img src="assets/su.png" width="25%" style=
                "float: left"><img src="assets/ljp.png" width="25%"
                style="float: right"><br>
                <br>
                <br>
                <br>
                <h2 style=
                "color:black;-webkit-text-stroke:2px white;">
                Assessing chemical preference of young
                zebrafish</h2>
                <h3 style=
                "color:black;-webkit-text-stroke:2px white;">
                Benjamin Gallois</h3>
            </section>
            <section data-background-video="assets/dataset.m4v"
            data-background-video-loop="loop">
                <h2 style=
                "color:black;-webkit-text-stroke:2px white;">
                FastTrack: a general purpose tracking
                software</h2><br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
            </section>
            <section>
                <h3>Image-based tracking</h3>
                <p>Locating objects over time from a video
                recording.</p><video data-autoplay="true" loop=
                "true" controls="true" class=
                "r-stretch"><source src="assets/intro.webm" type=
                "video/webm"></video>
            </section>
            <section>
                <h3>Challenges</h3>
                <ul>
                    <li>Object detection</li>
                    <li>Complex object interactions</li>
                    <li>Trade-off accuracy / specialization</li>
                    <li>Trade-off accuracy / speed</li>
                </ul>
            </section>
            <section>
                <h3>Tracking in the lab</h3>
                <div style="width:45%; float:left">
                    <u>Simplifications:</u>
                    <ul>
                        <li>Controlled lighting</li>
                        <li>Uniform background</li>
                        <li>Good image quality</li>
                        <li>Quasi 2D</li>
                    </ul>
                </div>
                <div style="width:45%; float:right">
                    <u>Requirements:</u>
                    <ul>
                        <li>Low fault tolerance</li>
                        <li>Minimal human interventions</li>
                        <li>Versatile</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>Existing software</h3>
                <div style="width:45%; float:left">
                    <h4><u>Properties-based</u></h4>
                    <p>Use dynamic properties to keep the
                    identities (ToxTrac).</p>
                    <ul>
                        <li style="color:green">Fast</li>
                        <li style="color:red">Error
                        propagation</li>
                    </ul>
                </div>
                <div style="width:45%; float:right">
                    <h4><u>Individuals-based</u></h4>
                    <p>Extracting a fingerprint for each individual
                    (idtracker, idtracker.ai).</p>
                    <ul>
                        <li style="color:green">Close to perfect
                        accuracy</li>
                        <li style="color:red">Computationally
                        intensive</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>What is missing?</h3>A software that is:
                <ul>
                    <li>Fast and accurate</li>
                    <li>Reliable</li>
                    <li>Easy to install and to use</li>
                    <li>Flexible and adaptable to existing
                    workflow</li>
                </ul>
            </section>
            <section data-background-video="assets/dataset.m4v">
                <div style=
                "float:top;color:white;-webkit-text-stroke:2px black;font-size:larger">
                    <h3 style=
                    "color:white;-webkit-text-stroke:2px black">
                    Two-Dimensional tracking Dataset</h3>
                    <ul>
                        <li>7 animal species (from cells to
                        mice)</li>
                        <li>Active particles</li>
                        <li>Microfluidic droplets</li>
                        <li>Macrocopic objects</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>FastTrack: a general tracking software</h3>
                <ul>
                    <li>Fast and automatic tracking algorithm</li>
                    <li>Manual ergonomic correction tool</li>
                </ul><img src="assets/readme.png" class=
                "r-stretch">
            </section>
            <section>
                <h3>Workflow</h3><img src="assets/Figure_1.svg"
                class="r-stretch">
            </section>
            <section>
                <h3>Detection</h3><img src=
                "assets/Figure_ellipse.svg" width="100%">
                <video data-autoplay="true" loop="true" controls=
                "true" class="r-stretch"><source src=
                "assets/detection.mp4" type="video/mp4"></video>
            </section>
            <section>
                <h3>Matching</h3>
                <p><u>Soft cost</u></p>$$c_{ij} = \frac{\delta
                d_{ij}}{s_d} + \frac{\delta a _{ij}}{s_{a}} +
                \frac{\delta A_{ij}}{s_A} + \frac{\delta
                P_{i,j}}{s_P}$$
            </section>
            <section data-transition="slide-in fade-out">
                <h3>Matching</h3><img src="assets/matching_0.svg"
                class="r-stretch">
            </section>
            <section data-transition="fade-in fade-out">
                <h3>Matching</h3><img src="assets/matching_1.svg"
                class="r-stretch">
            </section>
            <section data-transition="fade-in fade-out">
                <h3>Matching</h3><img src="assets/matching_2.svg"
                class="r-stretch"> $$c_{11}=\frac{d_{11}}{s_d} +
                \frac{a_{11}}{s_a}$$
            </section>
            <section data-transition="fade-in fade-out">
                <h3>Matching</h3><img src="assets/matching_3.svg"
                class="r-stretch"> $$c_{12}=\frac{d_{12}}{s_d} +
                \frac{a_{12}}{s_a}$$
            </section>
            <section data-transition="fade-in fade-out">
                <h3>Matching</h3><img src="assets/matching_4.svg"
                class="r-stretch"> $$c_{13}=\frac{d_{13}}{s_d} +
                \frac{a_{13}}{s_a}$$
            </section>
            <section data-transition="fade-in fade-out">
                <h3>Matching</h3><img src="assets/matching_5.svg"
                class="r-stretch"> $$C = \begin{bmatrix} c_{11} &
                c_{12} & c_{13}\\ & & \\ & & \end{bmatrix}$$
            </section>
            <section>
                <h3>Matching</h3>
                <p><u>Hard cost</u></p>
                <ul>
                    <li>Distance: if $d_{ij}&gt;h_d$, then $c_{ij}
                    = \infty$</li>
                    <li>Memory: if object $i$ lost more than $h_t$
                    time, then remove the $i^{th}$ line</li>
                </ul>
            </section>
            <section>
                <h3>Post processing</h3>
                <ul>
                    <li>Keyboards shortcuts</li>
                    <li>Swap, delete ids</li>
                    <li>Annotate, export the tracking</li>
                </ul><video data-autoplay="true" loop="true"
                controls="true" class="r-stretch"><source src=
                "assets/replay.webm" type="video/webm"></video>
            </section>
            <section>
                <h3>Performance</h3><img src=
                "assets/Figure_benchmark.svg" class="r-stretch">
            </section>
            <section>
                <h3>Dataset classification</h3>
                <ul>
                    <li>Find a metric to classify tracking
                    difficulty</li>
                    <li>Does not necessitate groundtruth
                    trajectories</li>
                    <li>Robust to tracking errors</li>
                </ul>
            </section>
            <section>
                <h3>Incursion</h3>
                <p>Incursion: object exits its Voronoï cell defined
                at a time $t$, after a travel time
                $\tau$.</p><img src="assets/incursion.svg" class=
                "r-stretch">
            </section>
            <section>
                <h3>Incursion</h3>
                <p>Number of incursions depends on:</p>
                <ul>
                    <li>Timescale $\tau$</li>
                    <li>Density $d$</li>
                    <li>Distribution of displacements</li>
                    <li>Geometric properties of Voronoï cells</li>
                    <li>Degree of motion alignment</li>
                </ul>
            </section>
            <section>
                <h3>Reduced displacement</h3>
                <div style="width:45%; float:left; margin-top:5%">
                <img src="assets/Figure_pinc.svg" class=
                "r-stretch"></div>
                <div style="width:45%; float:right; margin-top:5%">
                    <p>Reduced displacement $\rho=r\sqrt{d}$</p>
                    <ul>
                        <li>Typical distance to neighbors
                        $\rho=1$</li>
                        <li>Typical distance to Voronoï cell edges
                        $\rho=\frac{1}{2}$</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>Geometric probability of incursion</h3>
                <div style="width:45%; float:left;"><img src=
                "assets/pinc.svg" class="r-stretch"></div>
                <div style="width:45%; float:right;">
                    <p style="font-size:smaller">Geometric
                    probability of incursion: proportion of angles
                    for which incursions occur for a given
                    displacement $\rho$.</p><u>Per Voronoï cell</u>
                    <p style="font-size:smaller">
                    $$p(\rho)=\frac{\color{red}{\Sigma_{out}(\rho)}}{\color{red}{\Sigma_{out}(\rho)}
                    \color{black}{+}\color{blue}{\Sigma_{in}(\rho)}}
                    $$
                    $$p(\rho)=\frac{\color{red}{\Sigma_{out}(\rho)}}{2\pi}$$</p>
                </div>
            </section>
            <section>
                <h3>Geometric probability of incursion</h3>
                <div style="width:45%; float:left"><img src=
                "assets/voronoi.svg" height="500px"></div>
                <div style="width:45%; float:right">
                <p style="font-size:smaller">To account for many
                shapes and sizes:</p>$$p_{inc}(\rho)=\left&lt;
                p(\rho) \right&gt;_{cells}$$
                <p style="font-size:smaller">Purely static
                quantity.</p><img src="assets/sig.svg" height=
                "250px"></div>
            </section>
            <section>
                <h3>Probability of incursion</h3>
                <p style="font-size:smaller">If the dynamics is
                uncorrelated with the geometric properties of the
                Voronoï cells: $$P_{inc} = \int_{0}^{\infty}
                R(\rho) p_{inc}(\rho) \,d \rho $$</p>
                <ul style="font-size:smaller">
                    <li style="color:blue;">$R(\rho)$ distribution
                    of displacements at the timescale $\tau$</li>
                    <li style="color:red;">$p_{inc}(\rho)$
                    geometric probability of incursion</li>
                </ul><img src="assets/Pinc.svg" class="r-stretch">
            </section>
            <section>
                <h3>Probability of incursion</h3>
                <p>At $\tau=1$, $P_{inc}$ highly sensitive to
                tracking errors that shift $R(\rho)$ to the
                right.</p><img src="assets/Pinc_err.svg" class=
                "r-stretch">
            </section>
            <section>
                <h3>Timescale analysis</h3><img src=
                "assets/timescale.svg" class="r-stretch">
            </section>
            <section>
                <h3>Optimal framerate</h3>
                <ul style="font-size:smaller">
                    <li>Oversampled: lot of storage, higher
                    processing time</li>
                    <li>Undersampled: lot of incursions, higher
                    post-processing time</li>
                    <p>Define $\tau_1$ the timescale at which the
                    incursion probability is equal to a single
                    incursion in the whole movie.</p>
                    <li>$\tau_1&lt;1$: undersampled</li>
                    <li>$\tau_1&gt;1$: oversampled</li>
                </ul><img src="assets/sampled.svg" class=
                "r-stretch">
            </section>
            <section>
                <h3>Conclusion</h3>
                <ul>
                    <li>Easy to install</li>
                    <li>Available on Linux, MacOS and Windows</li>
                    <li>General: can handle various systems</li>
                    <li>New measure of trackability with
                    $P_{inc}$</li>
                    <li>$\tau_1$ a criterion to find the optimal
                    experimental framerate</li>
                </ul>
            </section>
            <section data-background-image=
            "assets/dual_photo.jpeg">
                <h2 style=
                "color:white;-webkit-text-stroke:2px black;background: rgba(0,0,0,0.5)">
                Assessing chemical preference of young
                zebrafish</h2>
            </section>
            <section>
                <h3>Chemical perception</h3>
                <ul>
                    <li>Most ancien sensory system</li>
                    <li>Wide range of taxa: unicellular to
                    mamalian</li>
                    <li>Mediate feeding and reproduction</li>
                </ul>
            </section>
            <section>
                <h3>The zebrafish</h3>
                <div style="width:45%; float:left">
                    <ul>
                        <li>Small and robust vertebrate</li>
                        <li>Well studied chemical senses</li>
                        <li>Various behaviors: phototaxis, OMR,
                        predation</li>
                        <li>Whole brain imaging using lightsheet
                        and transgenic larval fish</li>
                    </ul>
                </div>
                <div style="width:45%; float:right">
                    <img src="assets/larva.jpg" width=
                    "75%"><video data-autoplay="true" loop="true"
                    width="75%" style=
                    "position:relative; transform: translateY(-11%);"><source src="assets/omr.mp4"></video><video data-autoplay="true"
                    loop="true" width="75%" style=
                    "position:relative; transform: translateY(-11%);"><source src="https://files.trentesaux.fr/extra/blog/zf_brain.webm"></video>
                </div>
            </section>
            <section>
                <h3>Zebrafish olfaction</h3>
                <ul>
                    <li>Olfactory epithelium (snout) projecting
                    into the olfactory bulb (brain)</li>
                    <li>Olfactory epithelium formation start at 2
                    dpf</li>
                    <li>Mediate migration, feeding, reproduction,
                    fright reaction</li>
                </ul><img src="assets/olfactory_schematic.png"
                class="r-stretch">
            </section>
            <section>
                <h3>Zebrafish gustation</h3>
                <div style="width:45%; float:left;">
                    <ul>
                        <li>$\approx 2 200$ taste buds</li>
                        <li>Located on the head, lips,
                        oropharyngeal cavity and barbels</li>
                        <li>Formation start at 3-4 dpf</li>
                        <li>Mediate feeding, reproduction</li>
                    </ul>
                </div>
                <div style="width:45%; float:right;"><img src=
                "assets/gustatory_schematic.png" class=
                "r-stretch"></div>
            </section>
            <section>
                <h3>Zebrafish common chemical sense</h3>
                <ul>
                    <li>Solitary chemosensory cells in the
                    epidermis</li>
                    <li>$1.10^6$ per $mm^2$</li>
                    <li>Formation start at 3 dpf</li>
                </ul>
            </section>
            <section>
                <h3>Assessing chemical preference</h3>
                <p><b>Mandatory product screening</b></p>
                <ul>
                    <li>What product?</li>
                    <li>What concentration?</li>
                    <li>What age?</li>
                </ul>
                <p>Time consuming experimental work.</p>
            </section>
            <section>
                <h3>Dual</h3>
                <ul>
                    <li>High-throughput screening setup</li>
                    <li>Do It Yourself setup easy to replicate and
                    scalable</li>
                    <li>Open source, robust and versatile</li><br>
                    <li>Separate the tank in two "virtual"
                    compartments</li>
                    <li>Precisely controlled concentration</li>
                    <li><b>Fish can choose its prefered
                    side</b></li>
                </ul>
            </section>
            <section data-background-video=
            "assets/compartment.webm" data-background-size=
            "contain" data-background-video-loop="true">
                <h2><span class="fragment" style="color: white">How
                does it work?</span></h2>
            </section>
            <section data-background-image="assets/dual.png">
            </section>
            <section data-background-video="assets/meca.mp4"
            data-background-video-loop="true" data-transition=
            "fade-in fade-out"></section>
            <section data-background-video="assets/box.mp4"
            data-background-video-loop="true" data-transition=
            "fade-in fade-out"></section>
            <section>
                <img src="assets/chip.svg" class="r-stretch">
            </section>
            <section>
                <h3>Dye</h3>
                <ul>
                    <li>Infrared dye</li>
                    <li>Physical dye: colloidal emulsion</li>
                    <li>Biocompatible</li>
                </ul><img src="assets/dye.png" class="r-stretch">
            </section>
            <section>
                <h3 style="margin-bottom:0">Experimental
                protocol</h3><img src="assets/protocol.svg" class=
                "r-stretch">
                <ul style="font-size:smaller">
                    <li>2 weeks old zebrafish</li>
                    <li>In the dark</li>
                </ul>
            </section>
            <section>
                <h3>Analysis</h3><img src="assets/events.svg"
                class="r-stretch">
            </section>
            <section>
                <h3>Event-based analysis</h3>
                <div style="width:45%; float:left; margin-top:5%">
                    <u>Exploration</u>
                    <p style="font-size:smaller">$$\rho_{event} =
                    \frac{n_{BP} + n_{PB}}{n_{BB} + n_{PP}}$$</p>
                    <ul style="font-size:smaller">
                        <li>$\rho_{event} = \infty$
                        exploration</li>
                        <li>$\rho_{event} = 0$ exploitation</li>
                        <li>$\rho_{event} = 1$ mixed behavior</li>
                    </ul>
                </div>
                <div style="width:45%; float:right; margin-top:5%">
                    <u>Preference</u>
                    <p style="font-size:smaller">$$\Pi_{event} =
                    \frac{n_{BP} + n_{PP} - n_{BB} - n_{PB}}{n_{BP}
                    + n_{PP} + n_{BB} + n_{PB}} $$</p>
                    <ul style="font-size:smaller">
                        <li>$\Pi_{event} = 1$ attraction</li>
                        <li>$\Pi_{event} = -1$ repulsion</li>
                        <li>$\Pi_{event} = 0$ neutral</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>Markov model</h3><img src="assets/model.svg"
                class="r-stretch"> $p = \frac{n_{BP}}{n_{BP} +
                n_{BB}}$ &nbsp; &nbsp; $b = \frac{n_{PB}}{n_{PB} +
                n_{PP}}$
            </section>
            <section>
                <h3>Markov-based analysis</h3>
                <div style="width:45%; float:left; margin-top:5%">
                    <u>Exploration</u> $$\rho_{Markov} =
                    2Min(p,b)-1$$
                    <ul style="font-size:smaller">
                        <li>$\rho_{Markov} = 1$ exploration</li>
                        <li>$\rho_{Markov} = -1$ exploitation</li>
                        <li>$\rho_{Markov} = 0$ mixed behavior</li>
                    </ul>
                </div>
                <div style="width:45%; float:right; margin-top:5%">
                    <u>Preference</u> $$\Pi_{Markov} = p-b$$
                    <ul style="font-size:smaller">
                        <li>$\Pi_{Markov} = 1$ attraction</li>
                        <li>$\Pi_{Markov} = -1$ repulsion</li>
                        <li>$\Pi_{Markov} = 0$ neutral</li>
                    </ul>
                </div>
            </section>
            <section>
                <h3>Numerical simulation</h3><img src=
                "assets/pi_pb.svg" class="r-stretch">
                <ul>
                    <li>All $(p,b)$ are not accessible: sequence
                    length & p and b rational numbers</li>
                    <li>Strong preference $\implies$
                    exploitation</li>
                </ul>
            </section>
            <section>
                <h3>Dye effect</h3><img src="assets/dye_bias.svg"
                class="r-stretch">
            </section>
            <section>
                <h3>Product screening</h3>
                <ul>
                    <li>Citric acid: repulsive on adult zebrafish
                    <span style="font-size:smaller">(Abreu, Murilo
                    S., et al. 2016)</span></li>
                    <li>ATP, adenosine: attractive on adult
                    zebrafish <span style=
                    "font-size:smaller">(Wakisaka, Noriko, et al.
                    2017)</span></li>
                </ul>
            </section>
            <section>
                <h3>Citric acid: event-based</h3><img src=
                "assets/citricacid_event.svg" class="r-stretch">
            </section>
            <section>
                <h3>Citric acid: Markov-based</h3><img src=
                "assets/citricacid_markov.svg" class="r-stretch">
            </section>
            <section>
                <h3>ATP: event-based</h3><img src=
                "assets/atp_event.svg" class="r-stretch">
            </section>
            <section>
                <h3>ATP: Markov-based</h3><img src=
                "assets/atp_markov.svg" class="r-stretch">
            </section>
            <section>
                <h3>ATP: Markov-based</h3><img src=
                "assets/3dATP.svg" class="r-stretch">
            </section>
            <section>
                <h3>Perspective</h3>
                <ul>
                    <li>Explore ATP effect: fish age,
                    concentration, presentation time</li>
                    <li>Expand Dual usage: timed product
                    presentation, more cycles</li>
                    <li>Other animals: adult Danionella</li>
                </ul>
            </section>
            <section>
                <h3>Acknowledgments</h3>TODO
            </section>
        </div>
        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script src="plugin/math/math.js"></script>
        <script>





        Reveal.initialize({
                                hash: true,
            center: true,
            slideNumber: true,
        math: {
          mathjax: 'https://cdn.jsdelivr.net/gh/mathjax/mathjax@2.7.8/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          // pass other options into `MathJax.Hub.Config()`
          TeX: { Macros: { RR: "{\\bf R}" } }
        },
                                // Learn about plugins: https://revealjs.com/plugins/
                                plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath ]
                        });
        </script>
    </div>
</body>
</html>
